Kafka依赖文件系统存储和缓存消息。
- 现代操作系统提供预读和后写技术，预读是指预取多个大块的数据，后写是指将多个逻辑上的写入数据聚合为一个物理上的写入操作。事实上，这种顺序的磁盘读取比随机内存读取还要快。
- 现代操作系统使用内存作为磁盘的缓存，所有的读写操作都会经过唯一的缓存。即使进程维护了一份进程内数据缓存，数据也会在操作系统业内缓存复制一份，有效的储存了两份数据。
综上，Kafka使用的文件系统和依靠页面缓存优于维护内存缓存或其他的数据结构，Kafka通过自动的访问所有空闲内存，至少使有可用的缓存翻了一倍，通过使用紧凑的字节数据结构而不是独立的对象，使可用缓存再次翻倍。此外，即使重启服务器，这种缓存的内容没有丢失，相反，进程内缓存需要在内存中重新构造，或者需要从冷缓存开始。这也极大的简化了代码，因为用于维持缓存和文件系统一致性的所有逻辑现在都在操作系统中，这也比一次性进程内尝试更加有效和正确。如果你的磁盘使用更多是线性读，那么预读将在每次磁盘读取时，在页面缓存里有效的填充有用数据。
Kafka所有的数据立即写入文件系统的持久化日志里，并不需要必须刷入磁盘中，意味着数据被传输到内核的页面缓存中。
